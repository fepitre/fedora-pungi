From ec4fb785e5e68d09b6790963085d33787337ac0d Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?Lubom=C3=ADr=20Sedl=C3=A1=C5=99?= <lsedlar@redhat.com>
Date: Thu, 6 Oct 2016 13:12:34 +0200
Subject: [PATCH 2/4] ostree-installer: Use dvd-ostree as type in metadata
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit

This depends on python-productmd >= 1.3 that understands this format.

Fixes: #417
Signed-off-by: Lubomír Sedlář <lsedlar@redhat.com>
---
 pungi/phases/ostree_installer.py     | 2 +-
 tests/test_ostree_installer_phase.py | 2 +-
 2 files changed, 2 insertions(+), 2 deletions(-)

diff --git a/pungi/phases/ostree_installer.py b/pungi/phases/ostree_installer.py
index b07d7a4..5b8d89d 100644
--- a/pungi/phases/ostree_installer.py
+++ b/pungi/phases/ostree_installer.py
@@ -107,7 +107,7 @@ class OstreeInstallerThread(WorkerThread):
         img.mtime = util.get_mtime(full_iso_path)
         img.size = util.get_file_size(full_iso_path)
         img.arch = arch
-        img.type = "boot"
+        img.type = "dvd-ostree"
         img.format = "iso"
         img.disc_number = 1
         img.disc_count = 1
diff --git a/tests/test_ostree_installer_phase.py b/tests/test_ostree_installer_phase.py
index ad7ee2f..b3e04b6 100644
--- a/tests/test_ostree_installer_phase.py
+++ b/tests/test_ostree_installer_phase.py
@@ -61,7 +61,7 @@ class OstreeThreadTest(helpers.PungiTestCase):
         self.assertEqual(image.mtime, 13579)
         self.assertEqual(image.size, 1024)
         self.assertEqual(image.arch, 'x86_64')
-        self.assertEqual(image.type, "boot")
+        self.assertEqual(image.type, "dvd-ostree")
         self.assertEqual(image.format, "iso")
         self.assertEqual(image.disc_number, 1)
         self.assertEqual(image.disc_count, 1)
-- 
2.9.3

